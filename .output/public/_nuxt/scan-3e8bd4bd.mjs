import{_ as h,d as f,h as m,o as e,c as u,i as t,j as b,k,v as y,a as r,F as w,t as a,l as c}from"./entry-bd46a3d3.mjs";import{u as x}from"./fetch-6f56b794.mjs";import{S as E}from"./vue-tabler-icons.es-caf75899.mjs";import{f as p,r as F}from"./index-82e0ce3f.mjs";import"./utils-c8dfd953.mjs";const g=f({__name:"scan",setup(_,{expose:i}){i();const o=m({barcode:null,result:null,error:!1}),l={state:o,submit:async()=>{o.error=!1;const{data:d,pending:n,error:v,refresh:Ft}=await x("/api/tovar/scan",{method:"post",body:{Barcode:o.barcode}});if(v.value||!d.value)return o.error=!0;o.result=d.value},SearchIcon:E,format:p,ru:F};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}}),D={class:"flex flex-col items-center justify-center w-full gap-2"},A={class:"flex flex-col w-full gap-4 m-auto"},B={class:"shadow-xl card bg-base-100"},S={class:"card-body"},C=["onSubmit"],N={class:"w-full form-control"},j={class:"justify-start card-actions"},M={type:"submit",class:"btn btn-primary btn-md"},P={key:0,class:"flex flex-row items-center justify-center gap-2 font-semibold text-white shadow-lg alert alert-success"},I={class:"w-auto"},R={key:1,class:"flex flex-row items-center justify-center gap-2 font-semibold text-white shadow-lg alert alert-info"},V={class:"w-auto"},O={key:1,class:"stats"},T={class:"stat"},q=t("div",{class:"stat-title"},"\u2116 \u044F\u0447\u0435\u0439\u043A\u0438",-1),U={class:"stat-value"},Y={class:"stat"},z=t("div",{class:"stat-title"},"\u2116 \u0441\u043A\u043B\u0430\u0434\u0430",-1),G={class:"stat-value"},H={class:"stat"},J=t("div",{class:"stat-title"},"\u041F\u043E\u043A\u0443\u043F\u0430\u0442\u0435\u043B\u044C",-1),K={class:"stat-value"},L={key:2,class:"grid grid-cols-3 grid-rows-3 stats"},Q={class:"col-span-1 border-none stat"},W=t("div",{class:"stat-title"},"\u0411\u0430\u0440\u043A\u043E\u0434",-1),X={class:"stat-value"},Z={class:"col-span-1 border-none stat"},$=t("div",{class:"stat-title"},"\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435 \u0442\u043E\u0432\u0430\u0440\u0430",-1),tt={class:"stat-value"},st={class:"col-span-1 border-none stat"},at=t("div",{class:"stat-title"},"\u0410\u0440\u0442\u0438\u043A\u0443\u043B",-1),et={class:"stat-value"},ut={class:"col-span-1 border-none stat"},ot=t("div",{class:"stat-title"},"\u041C\u0430\u0440\u043A\u0430 \u0442\u043E\u0432\u0430\u0440\u0430",-1),it={class:"stat-value"},rt={class:"col-span-1 border-none stat"},ct=t("div",{class:"stat-title"},"\u0414\u0430\u0442\u0430 \u043F\u043E\u0441\u0442\u0443\u043F\u043B\u0435\u043D\u0438\u044F",-1),lt={class:"stat-value"},dt={class:"col-span-1 border-none stat"},nt=t("div",{class:"stat-title"},"\u0426\u0435\u043D\u0430",-1),_t={class:"stat-value"},vt={class:"col-span-1 border-none stat"},ht=t("div",{class:"stat-title"},"\u041F\u043E\u0441\u0442\u0430\u0432\u0449\u0438\u043A",-1),ft={class:"stat-value"},mt={class:"stat-desc"},bt={class:"col-span-1 border-none stat"},kt=t("div",{class:"stat-title"},"\u0420\u0430\u0431\u043E\u0442\u043D\u0438\u043A",-1),yt={class:"stat-value"},wt={class:"stat-desc"},xt={key:0,class:"flex flex-row items-center justify-center gap-2 font-semibold text-white shadow-lg alert alert-error"},Et=t("span",{class:"w-auto"},"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043D\u0430\u0439\u0442\u0438 \u0442\u043E\u0432\u0430\u0440 \u0441 \u0434\u0430\u043D\u043D\u044B\u043C \u0431\u0430\u0440\u043A\u043E\u0434\u043E\u043C",-1);function pt(_,i,o,s,l,d){return e(),u("div",D,[t("div",A,[t("div",B,[t("div",S,[t("form",{class:"flex flex-row items-center w-full gap-2",onSubmit:b(s.submit,["prevent"])},[t("div",N,[k(t("input",{"onUpdate:modelValue":i[0]||(i[0]=n=>s.state.barcode=n),type:"text",required:"",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0431\u0430\u0440\u043A\u043E\u0434 \u0442\u043E\u0432\u0430\u0440\u0430...",class:"w-full input input-bordered"},null,512),[[y,s.state.barcode]])]),t("div",j,[t("button",M,[r(s.SearchIcon)])])],40,C),!s.state.error&&s.state.result?(e(),u(w,{key:0},[s.state.result.wasCreated?(e(),u("div",P,[r(s.SearchIcon,{class:"flex-shrink-0"}),t("span",I,"\u0422\u043E\u0432\u0430\u0440 \u0441 \u0431\u0430\u0440\u043A\u043E\u0434\u043E\u043C \u2116"+a(s.state.result.tovar.Barcode)+" \u043F\u0440\u0438\u043D\u044F\u0442 \u0432 \u044F\u0447\u0435\u0439\u043A\u0443!",1)])):(e(),u("div",R,[r(s.SearchIcon,{class:"flex-shrink-0"}),t("span",V,"\u0422\u043E\u0432\u0430\u0440 \u0441 \u0431\u0430\u0440\u043A\u043E\u0434\u043E\u043C \u2116"+a(s.state.result.tovar.Barcode)+" \u0443\u0436\u0435 \u0431\u044B\u043B \u043F\u0440\u0438\u043D\u044F\u0442 \u0432 \u044F\u0447\u0435\u0439\u043A\u0443!",1)]))],64)):c("",!0),!s.state.error&&s.state.result?(e(),u("div",O,[t("div",T,[q,t("div",U,a(s.state.result.yacheika.id_Yacheiki),1)]),t("div",Y,[z,t("div",G,a(s.state.result.yacheika.id_Sklada),1)]),t("div",H,[J,t("div",K,a(s.state.result.yacheika.Pokupatel.Familia)+" "+a(s.state.result.yacheika.Pokupatel.Name)+" "+a(s.state.result.yacheika.Pokupatel.Otchestvo),1)])])):c("",!0),!s.state.error&&s.state.result?(e(),u("div",L,[t("div",Q,[W,t("div",X,a(s.state.result.tovar.Barcode),1)]),t("div",Z,[$,t("div",tt,a(s.state.result.tovar.Naimenovanie),1)]),t("div",st,[at,t("div",et,a(s.state.result.tovar.Artikyl),1)]),t("div",ut,[ot,t("div",it,a(s.state.result.tovar.Marka_Tovara),1)]),t("div",rt,[ct,t("div",lt,a(s.format(new Date(s.state.result.tovar.Data_postuplenia_na_sklad),"dd MMMM yyyy",{locale:s.ru})),1)]),t("div",dt,[nt,t("div",_t,a(s.state.result.tovar.Price),1)]),t("div",vt,[ht,t("div",ft,a(s.state.result.tovar.Postavchik.INN),1),t("div",mt,a(s.state.result.tovar.Postavchik.Naimenovanie),1)]),t("div",bt,[kt,t("div",yt,"\u2116"+a(s.state.result.tovar.Rabotnik.id_Rabotnika),1),t("div",wt,a(s.state.result.tovar.Rabotnik.Familia)+" "+a(s.state.result.tovar.Rabotnik.Name)+" "+a(s.state.result.tovar.Rabotnik.Otchestvo),1)])])):c("",!0)])]),s.state.error?(e(),u("div",xt,[r(s.SearchIcon,{class:"flex-shrink-0"}),Et])):c("",!0)])])}var Ct=h(g,[["render",pt]]);export{Ct as default};
